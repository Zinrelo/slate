<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ShopSocially - API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="images/favicon.png" rel="icon" type="image/png" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">Shell</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://shopsocially.com' target="_blank">ShopSocially Home Page</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="overview">Overview</h1>

<p>Welcome to the ShopSocially API documentation. You can use this API to access all our API endpoints, such as the <strong>Loyalty API</strong>, to build a common rewards program for all your sales channels.</p>

<p>We have language bindings in Shell and Python! You can view code examples in the area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">&gt;</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.shopsocially.com/v2/loyalty/transactions"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
</code></pre>
<pre class="highlight shell"><code>curl -H <span class="s2">"partner-id: &lt;your-partner-id&gt;"</span> 
     -H <span class="s2">"api-key: &lt;your-api-key&gt;"</span> 
     <span class="s2">"https://api.shopsocially.com/v2/loyalty/transactions"</span>
</code></pre>

<p>The ShopSocially API exports sensitive data, so any call to the ShopSocially API needs to be authenticated. </p>

<p>For authenticating an API call, you have to send your <strong>Partner ID</strong>, and an <strong>API Key</strong> in the HTTP header of each API request.</p>

<p>To access <strong>Partner ID</strong>, and the <strong>API Key</strong>, please follow the steps given below:</p>

<ul>
<li>Login to your Merchant Center Console.</li>
<li>Navigate to <strong>Basic Settings &gt; General Information</strong>, to find your <strong>Partner ID</strong>, and <strong>API Key</strong>. </li>
</ul>

<p><img alt="alt text" src="images/settings.png" /></p>

<aside class="notice">
If you don&rsquo;t see the API Key on your dashboard, please write to support@shopsocially.com
</aside>

<ul>
<li>Send the keys in the HTTP header of each API request as given below :</li>
</ul>

<p><code class="prettyprint">&#39;api-key&#39;: &#39;&lt;your-api-key&#39;</code></p>

<p><code class="prettyprint">&#39;partner-id&#39; : &#39;&lt;your-partner-id&gt;&#39;</code></p>

<h1 id="loyalty-api">Loyalty API</h1>

<p>The Loyalty API enables you to extend the loyalty program beyond your website.</p>

<h2 id="points">Points</h2>

<p>The Points API lets you award, redeem and deduct points from a user&rsquo;s account.</p>

<h3 id="award">Award</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: &lt;your-partner-id&gt;"</span> 
--header <span class="s2">"api-key: &lt;your-api-key&gt;"</span> 
--data <span class="s2">"user_email= &lt;User’s email ID&gt;"</span> 
--data <span class="s2">"points_passed = &lt;number of points to be awarded&gt;"</span> 
--data <span class="s2">"activity_id= &lt;activity ID&gt;"</span>
<span class="s2">"https://api.shopsocially.com/v2/loyalty/award"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">&gt;</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"user_email"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Users</span> <span class="n">email</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="s">"points_passed"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span> <span class="n">of</span> <span class="n">points</span> <span class="n">to</span> <span class="n">be</span> <span class="n">awarded</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="s">"activity_id"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">activity</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">})</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.shopsocially.com/v2/loyalty/award"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6176be2d5e"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@shopsocially.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"activity_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"made_a_purchase"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"activity_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Made a Purchase"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54aeb7b4f283c6176be2d5ed"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="s2">"award"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto_approved"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"partner_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"69c62d683db96c7cabf8db0109be6bb1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30-Mar-16 19:20:22"</span><span class="w">
        </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Award points to a user for any activity. 
Points will be awarded based on the user&rsquo;s email address.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.shopsocially.com/v2/loyalty/award</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Yes</td>
<td>The email of the user to whom points have to be awarded.</td>
</tr>
<tr>
<td>points_passed</td>
<td>integer</td>
<td>No (if activity type is fixed) Yes (if activity type is bonus multiplier)</td>
<td>If the activity is configured to award fixed number of points, the points passed will override the value set in the configuration. If the activity is configured to use a multiplier to award points, this becomes a mandatory parameter as the points cannot be awarded without the base value.</td>
</tr>
<tr>
<td>activity_id</td>
<td>string</td>
<td>Yes</td>
<td>The activity for which points needs to be awarded. The activity ID is available in the merchant center in the activity configuration.</td>
</tr>
<tr>
<td>order_id</td>
<td>string</td>
<td>No</td>
<td>When points are being awarded for purchase activity, it is recommended to pass order ID of the purchase transaction .This ensures that points for a particular transaction are awarded only once.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>string</td>
<td>Unique id generated for each user</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>user_last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>user_first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>activity_id</td>
<td>string</td>
<td>The id of the activity for which the points were awarded</td>
</tr>
<tr>
<td>activity_name</td>
<td>string</td>
<td>The name of the activity for which the points were awarded</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Internal id</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>This will always be &ldquo;award&rdquo;</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points awarded</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>The status of the award transaction</td>
</tr>
<tr>
<td>partner_id</td>
<td>string</td>
<td>The id of the merchant</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
</tbody></table>

<h3 id="redeem">Redeem</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: &lt;your-partner-id&gt;"</span> 
--header <span class="s2">"api-key: &lt;your-api-key&gt;"</span> 
--data <span class="s2">"user_email= &lt;User’s email ID&gt;"</span> 
--data <span class="s2">"redemption_id= &lt;redemption ID&gt;"</span>
<span class="s2">"https://api.shopsocially.com/v2/loyalty/redeem"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">&gt;</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"user_email"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Users</span> <span class="n">email</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="s">"redemption_id"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">redemption</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">})</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.shopsocially.com/v2/loyalty/redeem"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6176be2d5e"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@shopsocially.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"redemption_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$50_gift_card"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$50 Gift Card"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"redemption_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$50"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54aeb7b4f283c6176be2d5ed"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"redeem"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"redeemed"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET50OFF"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"partner_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9c62d683db96c7cabf8db0109be6bb"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30-Mar-15 19:20:22"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Redeem points for a user. 
Based on the redemption option chosen, points will be deducted from the user&rsquo;s account and a coupon code will be returned in the response.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.shopsocially.com/v2/loyalty/redeem</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Yes</td>
<td>The email of the user who wishes to redeem the points.</td>
</tr>
<tr>
<td>redemption_id</td>
<td>string</td>
<td>Yes</td>
<td>The ID of the desired redemption option. The redemption ID is available in the merchant center.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>string</td>
<td>Unique id generated for each user</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>user_last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>user_first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>redemption_id</td>
<td>string</td>
<td>The id of the redemption option chosen</td>
</tr>
<tr>
<td>redemption_name</td>
<td>string</td>
<td>The name of the redemption chosen option</td>
</tr>
<tr>
<td>redemption_value</td>
<td>string</td>
<td>The amount of the redemption option chosen (in dollars)</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Internal id</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>This will always be &ldquo;redeem&rdquo;</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points redeemed</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>This will always be &ldquo;redeemed&rdquo;</td>
</tr>
<tr>
<td>coupon_code</td>
<td>string</td>
<td>The coupon code to be used for successive transactions</td>
</tr>
<tr>
<td>partner_id</td>
<td>string</td>
<td>The id of the merchant</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
</tbody></table>

<h3 id="deduct">Deduct</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: &lt;your-partner-id&gt;"</span> 
--header <span class="s2">"api-key: &lt;your-api-key&gt;"</span> 
--data <span class="s2">"user_email= &lt;User’s email ID&gt;"</span> 
--data <span class="s2">"reason= &lt;reason&gt;"</span>
--data <span class="s2">"points_passed= &lt;points_passed&gt;"</span>
<span class="s2">"https://api.shopsocially.com/v2/loyalty/deduct"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">&gt;</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">"user_email"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Users</span> <span class="n">email</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="s">"reason"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">reason</span><span class="o">&gt;</span><span class="p">,</span>
                      <span class="s">"points_passed"</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">points_passed</span><span class="o">&gt;</span><span class="p">})</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.shopsocially.com/v2/loyalty/deduct"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6176be2d5e"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@shopsocially.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54aeb7b4f283c6176be2d5ed"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deduct"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deducted"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"available_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w">
          </span><span class="nt">"partner_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9c62d683db96c7cabf8db0109be6bb"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30-Mar-15 19:20:22"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Deduct points from a user’s available points. This deduction may not be related to redemption.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.shopsocially.com/v2/loyalty/deduct</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Yes</td>
<td>The email of the user whose points are to be deducted.</td>
</tr>
<tr>
<td>reason</td>
<td>string</td>
<td>Yes</td>
<td>The reason for deduction.</td>
</tr>
<tr>
<td>points_passed</td>
<td>string</td>
<td>Yes</td>
<td>The number of points to be deducted.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>string</td>
<td>Unique id generated for each user</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>user_last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>user_first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Internal id</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>This will always be &ldquo;deduct&rdquo;</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points deducted</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>This will always be &ldquo;deducted&rdquo;</td>
</tr>
<tr>
<td>available_points</td>
<td>integer</td>
<td>The points available to the user after deduction</td>
</tr>
<tr>
<td>partner_id</td>
<td>string</td>
<td>The id of the merchant</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
</tbody></table>

<h2 id="transactions">Transactions</h2>

<p>Work in Progress</p>

<h2 id="users">Users</h2>

<p>Work in Progress</p>

<h2 id="activities">Activities</h2>

<p>Work in Progress</p>

<h2 id="redemptions">Redemptions</h2>

<p>Work in Progress</p>

<h2 id="levels">Levels</h2>

<p>Work in Progress</p>

<h2 id="returns">Returns</h2>

<p>Work in Progress</p>

          <h1 id="errors">Errors</h1>

<p>Our API returns standard HTTP success or error status codes. For errors, we will also include extra information about what went wrong encoded in the response as JSON. The various HTTP status codes we might return are listed below.</p>

<h2 id="http-status-codes">HTTP Status codes</h2>

<table><thead>
<tr>
<th>Code</th>
<th>Title</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request was successful.</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Bad request.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Your API key is invalid.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>The resource does not exist.</td>
</tr>
<tr>
<td>50X</td>
<td>Internal Server Error</td>
<td>An error occured with our API.</td>
</tr>
</tbody></table>

<h2 id="error-types">Error types</h2>

<blockquote>
<p>Example error response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"missing parameters"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>All errors are returned in the form of JSON containing the error reason.</p>

<table><thead>
<tr>
<th>Reason</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authentication missing</td>
<td>When the authentication fields are missing from the header of the API request.</td>
</tr>
<tr>
<td>authentication failure</td>
<td>When the authentication fails due to a wrong combination of partner-id and api-key.</td>
</tr>
<tr>
<td>missing parameters</td>
<td>When the required parameters in a API request are missing.</td>
</tr>
<tr>
<td>unexpected date format</td>
<td>When the date format in the parameters for the API request is not in the required format.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">Shell</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
