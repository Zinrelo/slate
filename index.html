<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Zinrelo - API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="images/zinrelo_symbol.png" rel="icon" type="image/png" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img class="logo-image" src="https://d12oit0pxnpxg9.cloudfront.net/wp-content/uploads/2017/02/FINAL-Zinrelo_logo_notagline_cmyk_1.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">Shell</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://zinrelo.com' target="_blank">Zinrelo Home Page</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="overview">Overview</h1>

<p>Welcome to the Zinrelo API documentation. You can use this API to access all our API endpoints, such as the <strong>Loyalty API</strong>, to build a common rewards program for all your sales channels.</p>

<p>We have language bindings in Shell and Python! You can view code examples in the area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">partner</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">&gt;</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/transactions"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
</code></pre>
<pre class="highlight shell"><code>curl -H <span class="s2">"partner-id: &lt;your-partner-id&gt;"</span> 
     -H <span class="s2">"api-key: &lt;your-api-key&gt;"</span> 
     <span class="s2">"https://api.zinrelo.com/v1/loyalty/transactions"</span>
</code></pre>

<p>The Zinrelo API exports sensitive data, so any call to the Zinrelo API needs to be authenticated. </p>

<p>For authenticating an API call, you have to send your <strong>Partner ID</strong>, and an <strong>API Key</strong> in the HTTP header of each API request.</p>

<p>To access <strong>Partner ID</strong>, and the <strong>API Key</strong>, please follow the steps given below:</p>

<ul>
<li>Login to your Merchant Center Console.</li>
<li>Navigate to <strong>General &gt; Settings</strong>, to find your <strong>Partner ID</strong>, and <strong>API Key</strong>. </li>
</ul>

<p><img alt="alt text" src="images/zinrelo_settings_prod.png" /></p>

<aside class="notice">
If you don&rsquo;t see the API Key on your dashboard, please write to support@zinrelo.com
</aside>

<ul>
<li>Send the keys in the HTTP header of each API request as given below :</li>
</ul>

<p><code class="prettyprint">&#39;api-key&#39;: &#39;&lt;your-api-key&#39;</code></p>

<p><code class="prettyprint">&#39;partner-id&#39; : &#39;&lt;your-partner-id&gt;&#39;</code></p>

<h1 id="zinrelo-api">Zinrelo API</h1>

<h2 id="points">Points</h2>

<h3 id="award">Award</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span> 
--data <span class="s2">"user_email=bob@zinrelo.com"</span> 
--data <span class="s2">"points_passed=100"</span> 
--data <span class="s2">"activity_id=made_a_purchase"</span>
--data <span class="s2">"order_id=75a2726d13artibb10"</span>

<span class="s2">"https://api.zinrelo.com/v1/loyalty/award"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"user_email"</span><span class="p">:</span> <span class="s">"bob@zinrelo.com"</span><span class="p">,</span>
           <span class="s">"points_passed"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
           <span class="s">"activity_id"</span><span class="p">:</span> <span class="s">"made_a_purchase"</span><span class="p">,</span>
           <span class="s">"order_id"</span><span class="p">:</span><span class="s">"75a2726d13artibb10"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/award"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@zinrelo.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"activity_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"made_a_purchase"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"activity_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Made a Purchase"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="s2">"award"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto_approved"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30-Mar-16 19:20:22"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Award points to a user for any activity. 
Points will be awarded based on the user&rsquo;s email address.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.zinrelo.com/v1/loyalty/award</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Yes</td>
<td>The email of the user to whom points have to be awarded.</td>
</tr>
<tr>
<td>points_passed</td>
<td>integer</td>
<td>No (if activity type is fixed) Yes (if activity type is bonus multiplier)</td>
<td>If the activity is configured to award fixed number of points, the points passed will override the value set in the configuration. If the activity is configured to use a multiplier to award points, this becomes a mandatory parameter as the points cannot be awarded without the base value.</td>
</tr>
<tr>
<td>activity_id</td>
<td>string</td>
<td>Yes</td>
<td>The activity for which points needs to be awarded. The activity ID is available in the merchant center in the activity configuration.</td>
</tr>
<tr>
<td>order_id</td>
<td>string</td>
<td>No</td>
<td>When points are being awarded for purchase activity, it is recommended to pass order ID of the purchase transaction .This ensures that points for a particular transaction are awarded only once.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>activity_id</td>
<td>string</td>
<td>The id of the activity for which the points were awarded</td>
</tr>
<tr>
<td>activity_name</td>
<td>string</td>
<td>The name of the activity for which the points were awarded</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>This will always be &ldquo;award&rdquo;</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points awarded</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>The status of the award transaction</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
</tbody></table>

<h3 id="redeem">Redeem</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span> 
--data <span class="s2">"user_email=bob@zinrelo.com"</span> 
--data <span class="s2">"redemption_id=reward_d65bc"</span>
<span class="s2">"https://api.zinrelo.com/v1/loyalty/redeem"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span>
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"user_email"</span><span class="p">:</span> <span class="s">"bob@zinrelo.com"</span><span class="p">,</span>
           <span class="s">"redemption_id"</span><span class="p">:</span> <span class="s">"reward_d65bc"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/redeem"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@zinrelo.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$50 Gift Card"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"redemption_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_d65bc"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"redeemed"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET50OFF"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03-May-17 19:20:22"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Redeem points for a user. 
Based on the redemption option chosen, points will be deducted from the user&rsquo;s account and a coupon code will be returned in the response.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.zinrelo.com/v1/loyalty/redeem</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Yes</td>
<td>The email of the user who wishes to redeem the points.</td>
</tr>
<tr>
<td>redemption_id</td>
<td>string</td>
<td>Yes</td>
<td>The ID of the desired redemption option. The redemption ID is available in the merchant center.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>redemption_id</td>
<td>string</td>
<td>The id of the redemption option chosen</td>
</tr>
<tr>
<td>redemption_name</td>
<td>string</td>
<td>The name of the redemption chosen option</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points redeemed</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>This will always be &ldquo;redeemed&rdquo;</td>
</tr>
<tr>
<td>coupon_code</td>
<td>string</td>
<td>The coupon code to be used for successive transactions</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
</tbody></table>

<h3 id="deduct">Deduct</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span> 
--data <span class="s2">"user_email=bob@zinrelo.com"</span> 
--data <span class="s2">"reason=invalid transaction"</span>
--data <span class="s2">"points_passed=1000"</span>
<span class="s2">"https://api.zinrelo.com/v1/loyalty/users/deduct"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"user_email"</span><span class="p">:</span> <span class="s">"bob@zinrelo.com"</span><span class="p">,</span>
           <span class="s">"reason"</span><span class="p">:</span> <span class="s">"invalid transaction"</span><span class="p">,</span>
           <span class="s">"points_passed"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/users/deduct"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deducted"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deduct"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"available_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w">
          </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid transaction"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30-Mar-15 19:20:22"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@zinrelo.com"</span><span class="w">
         </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Deduct points from a user’s available points. This deduction may not be related to redemption.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.zinrelo.com/v1/loyalty/users/deduct</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Yes</td>
<td>The email of the user whose points are to be deducted.</td>
</tr>
<tr>
<td>reason</td>
<td>string</td>
<td>Yes</td>
<td>The reason for deduction.</td>
</tr>
<tr>
<td>points_passed</td>
<td>integer</td>
<td>Yes</td>
<td>The number of points to be deducted.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>This will always be &ldquo;deducted&rdquo;</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>This will always be &ldquo;deduct&rdquo;</td>
</tr>
<tr>
<td>available_points</td>
<td>integer</td>
<td>The points available to the user after deduction</td>
</tr>
<tr>
<td>reason</td>
<td>string</td>
<td>Reason for the deduction</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points deducted</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
</tbody></table>

<h2 id="transactions">Transactions</h2>

<h3 id="get-all-transactions">Get all transactions</h3>
<pre class="highlight shell"><code>curl -X GET --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span> 
--data <span class="s2">"from_date=01/01/2016"</span> 
--data <span class="s2">"to_date =31/12/2017"</span> 
--data <span class="s2">"points_status=['approved, auto_approved']"</span>
--data <span class="s2">"start_index=7"</span>
<span class="s2">"https://api.zinrelo.com/v1/loyalty/transactions"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="s">"from_date"</span><span class="p">:</span> <span class="s">"01/01/2016"</span><span class="p">,</span>
            <span class="s">"to_date"</span><span class="p">:</span> <span class="s">"05/23/2017"</span><span class="p">,</span>    
            <span class="s">"points_status"</span><span class="p">:</span> <span class="s">'["approved","auto_approved"]'</span><span class="p">,</span>
            <span class="s">"start_index"</span><span class="p">:</span> <span class="mi">7</span>
          <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/transactions"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w">
    </span><span class="nt">"next_start_index"</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactions"</span><span class="p">:[{</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"baker"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345ddfd67"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"auto_approval_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points_used"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"redemption_value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-09 12:42:05.484000"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nt">"approved_by"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enterprise"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09-May-2017 12:21:53"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activity_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase on website"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"award"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points_passed"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"approved_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-09 12:21:53.138000"</span><span class="w">
      </span><span class="p">},</span><span class="w"> 
    </span><span class="p">{</span><span class="err">...</span><span class="p">}],</span><span class="w">
    </span><span class="nt">"more"</span><span class="p">:</span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Fetch list of all transactions in the given period</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">GET  https://api.zinrelo.com/v1/loyalty/transactions</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td>string</td>
<td>Yes</td>
<td>The start date (format is MM/DD/YYYY)</td>
</tr>
<tr>
<td>to_date</td>
<td>string</td>
<td>Yes</td>
<td>The end date (format is MM/DD/YYYY)</td>
</tr>
<tr>
<td>points_status</td>
<td>list of strings</td>
<td>No</td>
<td>The status of the transaction (pending/approved/auto_approved/<br>auto_rejected/rejected/<br>pending/exhausted/expired)</td>
</tr>
<tr>
<td>start_index</td>
<td>integer</td>
<td>No</td>
<td>The index from where data needs to be fetched (defaults to 0)</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>total</td>
<td>integer</td>
<td>total number of transactions</td>
</tr>
<tr>
<td>next_start_index</td>
<td>integer</td>
<td>starting index of next batch of transactions</td>
</tr>
<tr>
<td>transactions</td>
<td>list</td>
<td>list of transactions</td>
</tr>
<tr>
<td>activity_name</td>
<td>string</td>
<td>Name of the activity</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>redemption_name</td>
<td>string</td>
<td>Name of the redemption</td>
</tr>
<tr>
<td>approved_time</td>
<td>string</td>
<td>The time when transaction was approved</td>
</tr>
<tr>
<td>auto_approval_date</td>
<td>string</td>
<td>The time when transaction was auto approved</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>Status of transaction (approved,auto_approved,exhausted,<br>pending,rejected,auto_rejected,expired)</td>
</tr>
<tr>
<td>transaction_type</td>
<td>string</td>
<td>Type of transaction (award,deduct,redeem)</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points involved in transaction</td>
</tr>
<tr>
<td>approved_by</td>
<td>string</td>
<td>Name of admin who approved the transaction</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the transaction was created</td>
</tr>
</tbody></table>

<h3 id="get-user-transactions">Get User Transactions</h3>
<pre class="highlight shell"><code>curl -X GET --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span>
--data <span class="s2">"from_date= 01/01/2016"</span>,
--data <span class="s2">"to_date= 12/31/2016"</span>,
--data <span class="s2">"points_status= ['approved']"</span>,
--data <span class="s2">"start_index= 0"</span>,
<span class="s2">"https://api.zinrelo.com/v1/loyalty/users/bob@zinrelo.com/transactions"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"from_date"</span> <span class="p">:</span> <span class="s">"01/01/2016"</span><span class="p">,</span>
    <span class="s">"to_date"</span> <span class="p">:</span> <span class="s">"12/31/2016"</span><span class="p">,</span>
    <span class="s">"points_status"</span> <span class="p">:</span> <span class="p">[</span><span class="s">'approved'</span><span class="p">],</span>
    <span class="s">"start_index"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/users/bob@zinrelo.com/transactions"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"next_start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"baker"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345ddfd67"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"auto_approval_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"points_used"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"redemption_value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"points_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-09 12:42:05.484000"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"approved_by"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enterprise"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09-May-2017 12:21:53"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"activity_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase on website"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"award"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"points_passed"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"approved_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-09 12:21:53.138000"</span><span class="w">
        </span><span class="p">}],</span><span class="w">
        </span><span class="nt">"more"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will return information about the transactions done (points earned / redeemed) by any user. User&rsquo;s email ID will be used to search and return user specific information.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">GET  https://api.zinrelo.com/v1/loyalty/users/{user_email}/transactions</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td>string</td>
<td>Yes</td>
<td>The start date</td>
</tr>
<tr>
<td>to_date</td>
<td>string</td>
<td>Yes</td>
<td>The end date</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>No</td>
<td>Status of transaction to fetch (pending/auto_approved/approved/<br>auto_rejected/rejected/expired/exhausted)</td>
</tr>
<tr>
<td>start_index</td>
<td>integer</td>
<td>No</td>
<td>The start index to fetch the data from (defaults to 0)</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>total</td>
<td>integer</td>
<td>Total number of transactions for the user</td>
</tr>
<tr>
<td>next_start_index</td>
<td>integer</td>
<td>Next index of record to fetch</td>
</tr>
<tr>
<td>transactions</td>
<td>array</td>
<td>Array of transactions based on time range, filters and start_index</td>
</tr>
<tr>
<td>more</td>
<td>boolean</td>
<td>Indicates if more number of transactions are available (true/false)</td>
</tr>
</tbody></table>

<h2 id="returns">Returns</h2>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span> 
--data <span class="s2">"order_id=ORDER101"</span> 
<span class="s2">"https://api.zinrelo.com/v1/loyalty/transaction/return"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span>
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"order_id"</span><span class="p">:</span> <span class="s">'ORDER101'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/transaction/return"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:{</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@zinrelo.com"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending_deduction"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"returned_for_order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER101"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order Fully Returned"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30-Mar-16 19:20:22"</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>Deduct points of a user when the user returns an order.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.zinrelo.com/v1/loyalty/transaction/return</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>string</td>
<td>Yes</td>
<td>The order ID for which the return needs to be processed.</td>
</tr>
<tr>
<td>returned_amount</td>
<td>integer</td>
<td>No</td>
<td>If returned_amount is specified and is a non-zero positive number, it will be processed as a partial return. The amount will be subtracted from the actual value of the order and remaining points will be awarded.</br>If returned_amount is not passed, it will be considered as complete order return.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>The person’s email address</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The person’s last name</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>The person’s first name</td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>The number of points awarded</td>
</tr>
<tr>
<td>points_status</td>
<td>string</td>
<td>The status of the award transaction</td>
</tr>
<tr>
<td>returned_for_order_id</td>
<td>string</td>
<td>The order ID for which the return has been processed</td>
</tr>
<tr>
<td>reason</td>
<td>string</td>
<td>The reason for returning the order</td>
</tr>
<tr>
<td>created_time</td>
<td>string</td>
<td>The time when the record was created</td>
</tr>
</tbody></table>

<h2 id="users">Users</h2>

<h3 id="create-user">Create User</h3>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"partner-id: cad458dc4e"</span>
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span>
--data <span class="s2">"first_name=bob"</span>
--data <span class="s2">"last_name=Baker"</span>
--data <span class="s2">"email=bob@zinrelo.com"</span>
--data <span class="s2">"uid=12345"</span>
--data <span class="s2">"dob=12/31/1992"</span>
<span class="s2">"https://api.zinrelo.com/v1/loyalty/users"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span>
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"first_name"</span> <span class="p">:</span> <span class="s">"Bob"</span><span class="p">,</span>
    <span class="s">"last_name"</span> <span class="p">:</span> <span class="s">"Baker"</span><span class="p">,</span>
    <span class="s">"email"</span> <span class="p">:</span> <span class="s">"bob@zinrelo.com"</span><span class="p">,</span>
    <span class="s">"uid"</span> <span class="p">:</span> <span class="s">"12345"</span><span class="p">,</span>
    <span class="s">"dob"</span><span class="p">:</span> <span class="s">"12/31/1992"</span>
    <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/users"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"bob@zinrelo.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="s2">"Baker"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a new user for merchant.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">POST  https://api.zinrelo.com/v1/loyalty/users</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>Yes</td>
<td>First name of the user</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>No</td>
<td>Last name of the user</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Yes</td>
<td>Email of the user</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>Yes</td>
<td>User ID of the user</td>
</tr>
<tr>
<td>dob</td>
<td>string</td>
<td>No</td>
<td>Birthdate of user. format is MM/DD/YYYY.</td>
</tr>
<tr>
<td>referral_code</td>
<td>string</td>
<td>No</td>
<td>Referral code of the friend who has referred the user to be created.</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>Email of the user</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>First name of the user</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>Last name of the user</td>
</tr>
</tbody></table>

<h3 id="get-all-users">Get All Users</h3>
<pre class="highlight shell"><code>curl -X GET --header <span class="s2">"partner-id: cad458dc4e"</span>
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span>
--data <span class="s2">"from_date=01/01/2016"</span>,
--data <span class="s2">"to_date=12/31/2016"</span>,
--data <span class="s2">"start_index=0"</span>,
--data <span class="s2">"count=10"</span>
<span class="s2">"https://api.zinrelo.com/v1/loyalty/users"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span>
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s">"from_date"</span> <span class="p">:</span> <span class="s">"01/01/2016"</span><span class="p">,</span>
    <span class="s">"to_date"</span> <span class="p">:</span> <span class="s">"12/31/2016"</span><span class="p">,</span>
    <span class="s">"start_index"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">10</span>
<span class="p">})</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/users"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total_loyalty_users"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"loyalty_users"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
       </span><span class="nt">"loyalty_tier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="nt">"loyalty_tier_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="nt">"expiration_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
       </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"redeemed_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"available_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="nt">"pending_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="nt">"awarded_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@zinrelo.com"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"referral_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOB1234"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"has_opted_out"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="nt">"referrer_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="nt">"dob"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"more"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will get all the users enrolled in the loyalty program.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">GET  https://api.zinrelo.com/v1/loyalty/users</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td>string</td>
<td>No</td>
<td>The start date</td>
</tr>
<tr>
<td>to_date</td>
<td>string</td>
<td>No</td>
<td>The end date</td>
</tr>
<tr>
<td>filter_by</td>
<td>string</td>
<td>No</td>
<td>Filters to be applied along with from_date and to_date. Accepted values: &lsquo;enrollment_date&rsquo; , &#39;last_activity_date</td>
</tr>
<tr>
<td>start_index</td>
<td>integer</td>
<td>No</td>
<td>The start index to fetch the data from (defaults to 0)</td>
</tr>
<tr>
<td>count</td>
<td>integer</td>
<td>No</td>
<td>Number of records to fetch (defaults to 10)</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>next_start_index</td>
<td>integer</td>
<td>Next index of record to fetch</td>
</tr>
<tr>
<td>total_loyalty_users</td>
<td>integer</td>
<td>Total number of loyalty users for this merchant</td>
</tr>
<tr>
<td>loyalty_users</td>
<td>array</td>
<td>Array of users based on time range, filters and start_index</td>
</tr>
<tr>
<td>more</td>
<td>boolean</td>
<td>Indicates if more number of users are available (true/false)</td>
</tr>
</tbody></table>

<h3 id="get-user">Get User</h3>
<pre class="highlight shell"><code>curl -X GET --header <span class="s2">"partner-id: cad458dc4e"</span>
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span>
<span class="s2">"https://api.zinrelo.com/v1/loyalty/users/bob@zinrelo.com"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span>
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>


<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/users/bob@zinrelo.com"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nt">"loyalty_tier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="nt">"loyalty_tier_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="nt">"expiration_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
   </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"redeemed_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"available_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pending_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"awarded_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@zinrelo.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"referral_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOB1234"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"has_opted_out"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="nt">"referrer_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="nt">"dob"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will get the details of the user along with available and redeemed points.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">GET  https://api.zinrelo.com/v1/loyalty/users/{user_email}</code></p>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_email</td>
<td>string</td>
<td>Email of the user</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>First name of the user</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>Last name of the user</td>
</tr>
<tr>
<td>dob</td>
<td>string</td>
<td>Date of birth of user, if available</td>
</tr>
<tr>
<td>redeemed_points</td>
<td>integer</td>
<td>Points redeemed by the user</td>
</tr>
<tr>
<td>available_points</td>
<td>integer</td>
<td>Points currently available for the user</td>
</tr>
<tr>
<td>awarded_points</td>
<td>integer</td>
<td>Points currently available for the user</td>
</tr>
<tr>
<td>pending_points</td>
<td>integer</td>
<td>Points pending for approval</td>
</tr>
<tr>
<td>loyalty_tier_id</td>
<td>string</td>
<td>ID of loyalty level currently assigned to user</td>
</tr>
<tr>
<td>loyalty_tier_name</td>
<td>string</td>
<td>ID of loyalty level currently assigned to user</td>
</tr>
<tr>
<td>expiration_schedule</td>
<td>array</td>
<td>Array of expiration schedules</td>
</tr>
<tr>
<td>referral_code</td>
<td>string</td>
<td>Referral code of the user</td>
</tr>
<tr>
<td>has_opted_out</td>
<td>boolean</td>
<td>Indicates whether the user has opted out of the loyalty program</td>
</tr>
<tr>
<td>referrer_email</td>
<td>string</td>
<td>Email address of the friend who has referred the current user</td>
</tr>
</tbody></table>

<h3 id="get-user-redemptions">Get User Redemptions</h3>
<pre class="highlight shell"><code>curl -X GET --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span>
--data <span class="s2">"is_still_valid=true"</span>,
--data <span class="s2">"order_by=allowed_redeem_points"</span>,
--data <span class="s2">"count=10"</span>,
--data <span class="s2">"start_index=0"</span>,
<span class="s2">"https://api.zinrelo.com/v1/loyalty/users/bob@zinrelo.com/redemptions"</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
  <span class="s">"is_still_valid"</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="s">"order_by"</span> <span class="p">:</span> <span class="s">"allowed_redeem_points"</span><span class="p">,</span>
  <span class="s">"count"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="s">"start_index"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/loyalty/users/bob@zinrelo.com/redemptions"</span><span class="p">,</span>
                        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="nt">"redemptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="p">{</span><span class="w">
        </span><span class="nt">"giftcard_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$25 Off Coupon for 2100 points"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$25 OFF COUPON"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"associated_levels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                              </span><span class="s2">"all"</span><span class="w">
                              </span><span class="p">],</span><span class="w">
        </span><span class="nt">"allowed_redeem_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">2100</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-May-2017 13:03:05"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"paypal_cashback_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_3063f"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-May-2017 13:03:05"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coupon_expiry"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coupon_status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                          </span><span class="nt">"uploaded_coupons"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                          </span><span class="nt">"remaining_coupons"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                         </span><span class="p">}</span><span class="w">
       </span><span class="p">},</span><span class="w">

       </span><span class="p">{</span><span class="w">
        </span><span class="nt">"giftcard_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$20 Off Coupon for 1800 points"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$20 OFF COUPON"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"associated_levels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                              </span><span class="s2">"all"</span><span class="w">
                             </span><span class="p">],</span><span class="w">
        </span><span class="nt">"allowed_redeem_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1800</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-May-2017 13:03:05"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"paypal_cashback_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_eb549"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-May-2017 13:03:05"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coupon_expiry"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coupon_status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                          </span><span class="nt">"uploaded_coupons"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                          </span><span class="nt">"remaining_coupons"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                         </span><span class="p">}</span><span class="w">
       </span><span class="p">},</span><span class="w">

       </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">

   </span><span class="nt">"more"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
   </span><span class="p">},</span><span class="w">
 </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>This will return information about the redemption options available to the user. User&rsquo;s email ID will be used to search and return user specific information.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">GET  https://api.zinrelo.com/v1/loyalty/users/{user_email}/redemptions</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>is_still_valid</td>
<td>boolean</td>
<td>No</td>
<td>Indicates whether only valid or all redemptions should be fetched (defaults to false)</td>
</tr>
<tr>
<td>order_by</td>
<td>string</td>
<td>No</td>
<td>The order in which the redemption options will be fetched (defaults to updated_time)</td>
</tr>
<tr>
<td>count</td>
<td>integer</td>
<td>No</td>
<td>The number of redemptions to be fetched (defaults to 12)</td>
</tr>
<tr>
<td>start_index</td>
<td>integer</td>
<td>No</td>
<td>The start index to fetch the data from (defaults to 0)</td>
</tr>
</tbody></table>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>total</td>
<td>integer</td>
<td>Total number of redemptions for the user</td>
</tr>
<tr>
<td>redemptions</td>
<td>array</td>
<td>Array of redemptions based on time range, filters and start_index</td>
</tr>
<tr>
<td>more</td>
<td>boolean</td>
<td>Indicates if more number of redemptions are available (true/false)</td>
</tr>
</tbody></table>

<h1 id="webhooks">Webhooks</h1>

<h2 id="introduction">Introduction</h2>

<p>A Webhook is simply an HTTP callback, an HTTP POST that occurs when something happens. Simply put, it is a simple event-notification via HTTP POST. Webhooks allow you to build or set up integrations, which subscribe to certain events on Zinrelo Loyalty Platform. When one of those events is triggered, we&rsquo;ll send an HTTP POST payload to the configured URL. Webhooks are aimed at enabling our merchants to extend the functionality provided by the Zinrelo’s Loyalty program by listening to the events and adding additional functionality like CRM integrations, email notifications and integrations with wallets/account credits etc.</p>

<h2 id="settings">Settings</h2>

<p>Webhook settings can be configured in the Notifications section of the Zinrelo store.</p>

<table><thead>
<tr>
<th>Sr.No.</th>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>Enable Webhook</td>
<td>Enable/Disable Webhook.</td>
</tr>
<tr>
<td>2</td>
<td>Webhook URL</td>
<td>Endpoint where events will be posted.</td>
</tr>
<tr>
<td>3</td>
<td>Events to send Webhook notifications for</td>
<td>Events for which you want to receive notifications for. Currently available events are User Enrollment, Points Awarded, Points Redeemed, Points Deducted</td>
</tr>
</tbody></table>

<p><img alt="alt text" src="images/webhook_settings_prod.png" /></p>

<h2 id="webhook-processing">Webhook processing</h2>

<blockquote>
<p>For example if your webhook end point is setup at below url: 
<em>http://example.com/loyalty_webhook/ss_webhook</em>
The Webhook post request can be received in the following way:</p>
</blockquote>
<pre class="highlight shell"><code><span class="c">#Please refer python tab for details</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="nd">@restrict</span><span class="p">(</span><span class="s">'POST'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">ss_webhook</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
    <span class="c">#handling code based on the event_type provided </span>
    <span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">body</span><span class="o">.</span><span class="n">event_type</span>
  <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="c">#handle exception</span>

</code></pre>

<blockquote>
<p>The structure of the webhook post request body is as follows:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"570265a77fae7c14c97a2b63"</span><span class="p">,</span><span class="w">
</span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">..</span><span class="p">},</span><span class="w">
</span><span class="nt">"event_type"</span><span class="p">:</span><span class="s2">"evt_points_awarded"</span><span class="p">,</span><span class="w">
</span><span class="nt">"created"</span><span class="p">:</span><span class="s2">"04-Apr-2016 13:01:27"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Receiving a Webhook Notification</strong></p>

<p>Creating a Webhook on your server is simple. Webhook data is sent as JSON in the POST request body. All the details regarding the event are included in the JSON. You are good to go once you parse the JSON.</p>

<p><strong>Responding a webhook</strong></p>

<p>Based on the event type, the payload will contain the user data or the transaction data. In the case of events - User Enrollment the payload contains the user object. Whereas in case of events - Points Awarded, Points Redeemed, Points Deducted the payload will contain the loyalty transaction details.</p>

<p>Your endpoint should return 200 HTTP status code to acknowledge receipt of the event. Any code other than the 200 HTTP status code is considered as a failure, and the event will be fired again with 5 minute intervals until the 200 HTTP status code is received or the maximum number of retry attempts has reached (The default retry attempts limit is 5. Get in touch with your Customer Success Manager to configure the settings).</p>

<p><strong>Best Practices</strong></p>

<p>If your Webhook script performs complex logic, or makes network calls, it is possible that the request would timeout before Zinrelo sees the script’s complete execution. For this reason, you may want to have your Webhook endpoint immediately acknowledge receipt by returning a 200 HTTP status code and then perform the rest of its duties.</p>

<p>Webhook endpoints may occasionally receive the same event more than once. We advise you to guard against duplicated event receipts by logging the events you have processed against the Event ID and then not processing already-logged events</p>

<p><strong>Securities</strong></p>

<p>You may want to confirm that the data received at your Webhook URL is actually the data sent by Zinrelo before acting upon it. To do so, you can use the events API endpoint as described below:
Upon receiving a Webhook event follow the below steps:</p>

<ol>
<li>Parse the JSON data in request body and get the Event ID value.</li>
<li>Use the Event ID value to get the data from Zinrelo using the <a href="#events-api-endpoint">Events API endpoint</a>.</li>
</ol>

<h2 id="events-api-endpoint">Events API Endpoint</h2>
<pre class="highlight shell"><code>curl -X GET --header <span class="s2">"partner-id: cad458dc4e"</span> 
--header <span class="s2">"api-key: c921e097e6679d21c0cad26a45bfec20"</span> 
<span class="s2">"https://api.zinrelo.com/v1/events/570265a77fae7c14c97a2b63”
</span></code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'partner-id'</span><span class="p">:</span> <span class="s">'cad458dc4e'</span><span class="p">,</span> 
           <span class="s">'api-key'</span><span class="p">:</span> <span class="s">'c921e097e6679d21c0cad26a45bfec20'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.zinrelo.com/v1/events/570265a77fae7c14c97a2b63"</span><span class="p">,</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

</code></pre>

<blockquote>
<p>The response of the above command is:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"570265a77fae7c14c97a2b63"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pingle"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"activity_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"became_an_email_subscriber"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aditya"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56263eac2d6f2a7715b3d2d1"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"award"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"points_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="nt">"qualified_points"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
              </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
              </span><span class="nt">"points_expired"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:01:27"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aditya@shopsocially.com"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"activity_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Became an Email Subscriber"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9935740ac1fe23a1962de5cf4250c036"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"570265a7735f835a2ce12a15"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"approved_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:01:27"</span><span class="w"> 
              </span><span class="p">},</span><span class="w">
        </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt_points_awarded"</span><span class="p">,</span><span class="w"> 
        </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:01:27"</span><span class="w">
          </span><span class="p">},</span><span class="w">
</span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will get the Event data given the Event ID. The ‘data’ returned in the response of the API is identical to the Event data received via Webhook.</p>

<p><strong>HTTP Request</strong></p>

<p><code class="prettyprint">GET https://api.zinrelo.com/v1/loyalty/events/{id}</code></p>

<p><code class="prettyprint">Response Body</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Event ID</td>
</tr>
<tr>
<td>data</td>
<td>Dictionary</td>
<td>Transaction Details\User deatils</td>
</tr>
<tr>
<td>event_type</td>
<td>String</td>
<td>Event Type</td>
</tr>
<tr>
<td>created</td>
<td>String</td>
<td>Event Created Time</td>
</tr>
</tbody></table>

<h2 id="event-data-format">Event Data Format</h2>

<p>When configuring a Webhook, you can choose the events you would like to receive payloads for. Subscribing only to the events, which you implement, will help in limiting the HTTP requests to your server. </p>

<p>The events supported by Zinrelo Loyalty program are:</p>

<table><thead>
<tr>
<th>Sr.No.</th>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>User Enrollment</td>
<td>When a new user enrolls into the loyalty program.</td>
</tr>
<tr>
<td>2</td>
<td>Points Awarded</td>
<td>When points are awarded (approved) to a user.</td>
</tr>
<tr>
<td>3</td>
<td>Points Redeemed</td>
<td>When a user redeems points.</td>
</tr>
<tr>
<td>4</td>
<td>Points Deducted</td>
<td>When points are deducted from a user’s loyalty points balance</td>
</tr>
<tr>
<td>5</td>
<td>Tier Upgrade</td>
<td>When a customer upgrades to a higher tier</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request body for a User Enrollment event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28-Sep-2017 06:49:54"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> 
      </span><span class="p">{</span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Daena"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="s2">"Wille"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59cc9b91418a580a512b450d"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"daen1234"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"dob"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"loyalty_tier_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zrl_silver"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"available_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"loyalty_tier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Silver"</span><span class="p">,</span><span class="w"> 
      </span><span class="nt">"referral_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://arti55.zinrelo.com/ref/DAE4429"</span><span class="p">,</span><span class="w"> 
      </span><span class="nt">"referral_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAE4429"</span><span class="p">,</span><span class="w"> 
      </span><span class="nt">"redeemed_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"awarded_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Daena1234@shopsocially.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"pending_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59cc9b93418a58027716b78d"</span><span class="p">,</span><span class="w"> 
    </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt_user_enrollment"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p><strong>User Enrollment</strong></p>

<p>User Enrollment event occurs whenever a new user enrolls into Zinrelo loyalty program.
On successfull user enrollment we make a call to your webhook URL with following request body: </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Event ID</td>
</tr>
<tr>
<td>data</td>
<td>Dictionary</td>
<td>User Details</td>
</tr>
<tr>
<td>event_type</td>
<td>String</td>
<td>Event Type</td>
</tr>
<tr>
<td>created</td>
<td>String</td>
<td>Event Created Time</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request body for a Points Awarded event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">  
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57026ce2c22f9f7b50bbdf6e"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"activity_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"became_an_email_subscriber"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aditya"</span><span class="p">,</span><span class="w"> 
          </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_expired"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:32:18"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9935740ac1fe23a1962de5cf4250c036"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57026ce2735f835a2ce12a33"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"approved_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:32:18"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points_expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56263eac2d6f2a7715b3d2d1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"award"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pingle"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="nt">"qualified_points"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
          </span><span class="nt">"activity_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Became an Email Subscriber"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aditya@shopsocially.com"</span><span class="w">
          </span><span class="p">},</span><span class="w">
  </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt_points_awarded"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:32:18"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Points Awarded</strong></p>

<p>Points Awarded event occurs whenever any user has been awarded loyalty points. In the case of the activities where moderation is required, the event occurs once the points have been approved.
On successfull points award event, we make a call to your webhook URL with following  request body: </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Event ID</td>
</tr>
<tr>
<td>data</td>
<td>Dictionary</td>
<td>Transaction Details</td>
</tr>
<tr>
<td>event_type</td>
<td>String</td>
<td>Event Type</td>
</tr>
<tr>
<td>created</td>
<td>String</td>
<td>Event Created Time</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request body for a Points Redeemed event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">  
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"570265487fae7c14c77a2b63"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"redeemed"</span><span class="p">,</span><span class="w"> 
        </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56263eac2d6f2a7715b3d2d1"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_redemption 50"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aditya"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"redeem"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pingle"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redemption_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_redemption_50"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 12:59:52"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9935740ac1fe23a1962de5cf4250c036"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57026548735f835a2d16b01c"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aditya@shopsocially.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
  </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt_points_redeemed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 12:59:52"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Points Redeemed</strong></p>

<p>Points Redeemed event occurs whenever a user redeems his loyalty points.
On successfull points redeemed event, we make a call to your webhook URL with following request body: </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Event ID</td>
</tr>
<tr>
<td>data</td>
<td>Dictionary</td>
<td>Transaction Details</td>
</tr>
<tr>
<td>event_type</td>
<td>String</td>
<td>Event Type</td>
</tr>
<tr>
<td>created</td>
<td>String</td>
<td>Event Created Time</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request body of Points Deducted event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57026857c22f9f7b50bbdf6c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"user_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aditya"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56263eac2d6f2a7715b3d2d1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deducted"</span><span class="p">,</span><span class="w"> 
      </span><span class="nt">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deduct"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pingle"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testing"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">30000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"points_deducted"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:12:55"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9935740ac1fe23a1962de5cf4250c036"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57026857735f835a2ce12a27"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aditya@shopsocially.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt_points_deducted"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04-Apr-2016 13:12:55"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Points Deducted</strong></p>

<p>Points Deducted event occurs whenever points are deducted from a user’s loyalty points balance. The points can be deducted from Zinrelo store or using API calls.
On successful points deduct event, we make a call to your webhook URL with following request body: </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Event ID</td>
</tr>
<tr>
<td>data</td>
<td>Dictionary</td>
<td>Transaction Details</td>
</tr>
<tr>
<td>event_type</td>
<td>String</td>
<td>Event Type</td>
</tr>
<tr>
<td>created</td>
<td>String</td>
<td>Event Created Time</td>
</tr>
</tbody></table>

<blockquote>
<p>Example request body of Tier Upgrade event:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57026857c22f9f7b50bbdf6c"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baker"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"loyalty_tier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pearl"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76183"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5982d90663fda91f6fb37564"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"dob"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"loyalty_tier_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zrl_pearl"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"available_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1738</span><span class="p">,</span><span class="w">
      </span><span class="nt">"referral_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storeforpreviewdahsboard.zinrelo.com/ref/BOB7091"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"referral_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOB7091"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"redeemed_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"awarded_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1738</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob@xyz.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"pending_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt_level_upgrade"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01-Apr-2016 12:26:08"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Tier Upgrade</strong></p>

<p>The Tier upgrade event occurs whenever a customer earns enough points to move up to a higher tier. The tier upgrade is processed immediately and the webhook is triggered at the time of upgrade. On successful tier upgrade event, we make a call to your webhook URL with following request body: </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Event ID</td>
</tr>
<tr>
<td>data</td>
<td>Dictionary</td>
<td>Transaction Details</td>
</tr>
<tr>
<td>event_type</td>
<td>String</td>
<td>Event Type</td>
</tr>
<tr>
<td>created</td>
<td>String</td>
<td>Event Created Time</td>
</tr>
</tbody></table>

<h1 id="javascript-api">JavaScript API</h1>

<h2 id="get-user-info">Get User Info</h2>

<p>This javascript function will get the details of the user from Zinrelo
Platform.</p>
<pre class="highlight javascript"><code><span class="nx">zrl_mi</span><span class="p">.</span><span class="nx">get_loyalty_user_info</span><span class="p">()</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">zrlmi_loyalty_user_info_success_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
     <span class="cm">/***code to handle success response***/</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">zrlmi_loyalty_user_info_failure_handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
     <span class="cm">/***code to handle failure response***/</span>
<span class="p">}</span>
</code></pre>

<p><strong>Request</strong></p>

<p><code class="prettyprint">zrl_mi.get_loyalty_user_info()</code></p>

<aside class="notice">
Implement the JavaScript success and failure handler functions mentioned in JavaScript tab to get response from above function.
</aside>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="nt">"available_points"</span><span class="p">:</span><span class="mi">19862</span><span class="p">,</span><span class="w">
</span><span class="nt">"awarded_points"</span><span class="p">:</span><span class="mi">20200</span><span class="p">,</span><span class="w">
</span><span class="nt">"dob"</span><span class="p">:</span><span class="s2">"07/22/1990"</span><span class="p">,</span><span class="w">
</span><span class="nt">"first_name"</span><span class="p">:</span><span class="s2">"RT"</span><span class="p">,</span><span class="w">
</span><span class="nt">"last_name"</span><span class="p">:</span><span class="s2">"406"</span><span class="p">,</span><span class="w">
</span><span class="nt">"loyalty_tier_id"</span><span class="p">:</span><span class="s2">"zrl_level_platinum"</span><span class="p">,</span><span class="w">
</span><span class="nt">"loyalty_tier_name"</span><span class="p">:</span><span class="s2">"Platinum"</span><span class="p">,</span><span class="w">
</span><span class="nt">"pending_points"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="nt">"redeemed_points"</span><span class="p">:</span><span class="mi">338</span><span class="p">,</span><span class="w">
</span><span class="nt">"referral_code"</span><span class="p">:</span><span class="s2">"ART7993"</span><span class="p">,</span><span class="w">
</span><span class="nt">"referrer_email"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nt">"ss_uid"</span><span class="p">:</span><span class="s2">"b986ff5cdf5eb5498ec492a9939b6628"</span><span class="p">,</span><span class="w">
</span><span class="nt">"success"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"uid"</span><span class="p">:</span><span class="s2">"arti 406"</span><span class="p">,</span><span class="w">
</span><span class="nt">"user_email"</span><span class="p">:</span><span class="s2">"arti@shopsocially.com"</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Response Body</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>awarded_points</td>
<td>Integer</td>
<td>Total Points awarded to the user</td>
</tr>
<tr>
<td>dob</td>
<td>String</td>
<td>Date of birth of the user</td>
</tr>
<tr>
<td>first_name</td>
<td>String</td>
<td>First name of the user</td>
</tr>
<tr>
<td>last_name</td>
<td>String</td>
<td>Last name of the user</td>
</tr>
<tr>
<td>loyalty_tier_id</td>
<td>String</td>
<td>ID of loyalty tier currently assigned to user</td>
</tr>
<tr>
<td>loyalty_tier_name</td>
<td>String</td>
<td>Name of loyalty tier currently assigned to user</td>
</tr>
<tr>
<td>pending_points</td>
<td>Integer</td>
<td>Points pending for approval</td>
</tr>
<tr>
<td>redeemed_points</td>
<td>Integer</td>
<td>Points redeemed by the user</td>
</tr>
<tr>
<td>referral_code</td>
<td>String</td>
<td>Current user&rsquo;s referral code</td>
</tr>
<tr>
<td>referrer_email</td>
<td>String</td>
<td>Referrer&rsquo;s email address If the current user is referred by someone</td>
</tr>
<tr>
<td>ss_uid</td>
<td>String</td>
<td>Zinrelo internal user ID</td>
</tr>
<tr>
<td>uid</td>
<td>String</td>
<td>Unique ID of user at merchant side</td>
</tr>
<tr>
<td>user_email</td>
<td>String</td>
<td>Email of the user</td>
</tr>
</tbody></table>

<h1 id="status-codes">Status Codes</h1>

<p>Our API returns standard HTTP success or failure status codes. For failures, we will also include extra information about what went wrong encoded in the response as JSON. The various HTTP and API status codes we might return are listed below.</p>

<h2 id="http-status-codes">HTTP Status codes</h2>

<table><thead>
<tr>
<th>Code</th>
<th>Title</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request was successful.</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Bad request.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Your API key is invalid.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>The resource does not exist.</td>
</tr>
<tr>
<td>50X</td>
<td>Internal Server Error</td>
<td>An error occured with our API.</td>
</tr>
</tbody></table>

<h2 id="api-status-codes">API Status Codes</h2>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>601</td>
<td>One or more request parameters do not have values in the expected format</td>
</tr>
<tr>
<td>602</td>
<td>User does not exist</td>
</tr>
<tr>
<td>603</td>
<td>Redeemption operation failed</td>
</tr>
<tr>
<td>604</td>
<td>Invalid Redemption ID</td>
</tr>
<tr>
<td>605</td>
<td>Inactive Redemption ID</td>
</tr>
<tr>
<td>606</td>
<td>Redemption coupon expired</td>
</tr>
<tr>
<td>607</td>
<td>Insufficient redeemable points</td>
</tr>
<tr>
<td>608</td>
<td>Redemption coupons exhausted</td>
</tr>
<tr>
<td>609</td>
<td>Duplicate Order ID</td>
</tr>
<tr>
<td>610</td>
<td>Activity is in paused state</td>
</tr>
<tr>
<td>611</td>
<td>Invalid Activity ID</td>
</tr>
<tr>
<td>612</td>
<td>end_date cannot be less than start_date</td>
</tr>
<tr>
<td>613</td>
<td>Invalid Order ID</td>
</tr>
<tr>
<td>614</td>
<td>Points to deduct is greater than points available to deduct for the Order ID</td>
</tr>
<tr>
<td>615</td>
<td>missing parameters</td>
</tr>
<tr>
<td>616</td>
<td>Invalid event ID</td>
</tr>
<tr>
<td>617</td>
<td>Maximum award limit exceeded</td>
</tr>
<tr>
<td>618</td>
<td>Points could not be awarded because exclusion rule was applied</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">Shell</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
